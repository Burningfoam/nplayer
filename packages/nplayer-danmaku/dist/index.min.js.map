{"version":3,"sources":["webpack://NPlayerDanmaku/webpack/universalModuleDefinition","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/scss/index.scss","webpack://NPlayerDanmaku/./node_modules/css-loader/dist/runtime/api.js","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/scss/index.scss?abb8","webpack://NPlayerDanmaku/webpack/bootstrap","webpack://NPlayerDanmaku/webpack/runtime/compat get default export","webpack://NPlayerDanmaku/webpack/runtime/define property getters","webpack://NPlayerDanmaku/webpack/runtime/hasOwnProperty shorthand","webpack://NPlayerDanmaku/webpack/runtime/make namespace object","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/ts/utils.ts","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/ts/danmaku/bullet.ts","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/ts/danmaku/index.ts","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/ts/send-box.ts","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/ts/setting.ts","webpack://NPlayerDanmaku/./packages/nplayer-danmaku/src/ts/main.ts"],"names":["root","factory","exports","module","define","amd","this","___CSS_LOADER_EXPORT___","i","push","id","cssWithMappingToString","list","toString","map","item","content","concat","join","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","el","window","document","style","__esModule","default","css","create","createElement","setAttribute","textContent","styleSheet","cssText","head","appendChild","insert","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","isDefaultColor","color","toLowerCase","storageKey","SEND_SETTINGS","SEND","MODE","SCROLL","TOP","BOTTOM","COLOR","COLOUR","DANMAKU_SETTINGS","ONOFF","RESTORE","BLOCK_BT","OPACITY","DISPLAY_A","HALF_S","FULL_S","DANMAKU_S","SLOW","FAST","FONTSIZE","SMALL","UNLIMITED","BOTTOM_TT","trans","EVENT","DANMAKU_SEND","DANMAKU_UPDATE_OPTIONS","itemClass","Bullet","container","danmaku","opts","setting","width","left","startAt","showAt","endAt","speed","track","ended","end","element","removeEventListener","clearTimeout","centerTimer","className","hide","recycleBullet","init","text","type","isMe","classList","add","fontSize","fontsize","timer","now","addEventListener","getBoundingClientRect","danmakuWidth","prev","speedScale","duration","s","maxSpeed","t","updateScrollY","transition","transform","pos","setTimeout","show","paused","pause","trackHeight","bottomUp","top","bottom","visibility","time","utils","defaultOptions","disable","blocked","fontsizeScale","opacity","area","unlimited","colors","items","zIndex","persistOptions","discard","Danmaku","player","_opts","enabled","bulletPool","aliveBullets","Set","scrollBullets","topBullets","bottomBullets","prevPauseTime","fire","playing","resume","currentTime","inc","min","max","l","shouldDiscard","onSeeked","clearScreen","forEach","bullet","loading","isActive","play","run","optStr","localStorage","getItem","JSON","parse","error","getStorageOptions","Player","_utils","$","addDisposable","String","_prevPauseTime","_pausedTime","_paused","Date","enable","on","MOUNTED","updateTrack","rect","playbackRate","pop","shortest","includes","Math","floor","height","emit","setItem","stringify","setStorageOptions","delete","getShortestTrack","canDiscard","force","createBullet","getEmptyTrack","addItem","index","splice","storeOptions","scale","b","v","filter","allowType","updateOpacity","updateFontsize","updateBottomUp","Array","from","EV","TIME_UPDATE","PAUSE","ENDED","PLAY","SEEKED","LOADING_SHOW","LOADING_HIDE","off","removeNode","dispose","DanmakuSendBox","typeCBs","currentType","onTypeChange","scroll","update","ev","getEventPath","popover","tooltip","send","inputElement","colorInputElement","components","I18n","addDisposableListener","createSvg","settingElement","Tooltip","Popover","sendElement","colorItem","panelElement","rowElement","Checkbox","html","checked","change","updateColor","colorElement","target","dataset","c","background","altKey","ctrlKey","metaKey","shiftKey","keyCode","which","control","require","release","DanmakuSetting","clamp","addClass","row","Switch","resetBtn","resetOptions","scrollCB","topCB","bottomCB","colorCB","opacitySlider","Slider","stops","areaSlider","step","updateArea","speedSlider","updateSpeed","fontsizeSlider","unlimitedCB","updateUnlimited","bottomUpCB","0.25","0.5","0.75","1","Plugin","registerControlItem","autoInsertControl","controls","findIndex","spacer","getControlItem","flex"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"NPlayerDanmaku\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NPlayerDanmaku\"] = factory();\n\telse\n\t\troot[\"NPlayerDanmaku\"] = factory();\n})(this, function() {\nreturn ","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nplayer_danmaku_screen{bottom:0;left:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0}.nplayer_danmaku_send{align-items:center;background:hsla(0,0%,100%,.15);display:flex;flex:1;font-size:0;margin:0 10px!important}.nplayer_danmaku_send input{background:transparent;border:0;color:currentColor;flex:1;outline:0;padding:0;width:100px}.nplayer_danmaku_send input::-moz-placeholder{color:hsla(0,0%,100%,.5)}.nplayer_danmaku_send input:-ms-input-placeholder{color:hsla(0,0%,100%,.5)}.nplayer_danmaku_send input::placeholder{color:hsla(0,0%,100%,.5)}.nplayer_danmaku_send_btn{cursor:pointer;font-size:12px;padding:0 10px;white-space:nowrap}.nplayer_danmaku_send .nplayer_popover_panel{padding:0 10px}.nplayer_danmaku_send .nplayer_checkbox{margin-top:3px}.nplayer_danmaku_send .nplayer_checkbox+.nplayer_checkbox{margin-left:8px}.nplayer_danmaku_colors{align-items:center;display:flex;flex-wrap:wrap}.nplayer_danmaku_color{translate:transform .2s ease;height:15px;margin-bottom:5px;margin-right:5px;width:15px}.nplayer_danmaku_color_row{align-items:stretch;display:flex;margin:5px 0}.nplayer_danmaku_color_row input{border:1px solid hsla(0,0%,100%,.8);flex:3;letter-spacing:1px;padding:0 5px;width:0}.nplayer_danmaku_color_preview{flex:2;height:20px;margin-left:5px}.nplayer_danmaku_color:hover{transform:scale(1.1)}.nplayer_danmaku_row{justify-content:space-between;margin:8px 0}.nplayer_danmaku_onoff_label{margin-right:5px;margin-top:-2px}.nplayer_danmaku_reset{border:1px solid hsla(0,0%,100%,.5);margin-left:auto;padding:2px 5px;transition:opacity .2s ease}.nplayer_danmaku_reset:hover{opacity:.7}.nplayer_danmaku_setting{padding:6px 8px}.nplayer_danmaku_setting .nplayer_slider{margin:3px 10px}.nplayer_danmaku_setting .nplayer_checkbox{margin-top:3px}.nplayer_danmaku_setting .nplayer_checkbox+.nplayer_checkbox{margin-left:8px}.nplayer_danmaku_item{color:#fff;letter-spacing:1px;line-height:1.125;position:absolute;text-shadow:#000 1px 0 1px,#000 0 1px 1px,#000 0 -1px 1px,#000 -1px 0 1px;white-space:nowrap;will-change:transform}.nplayer_danmaku_item-center{left:50%;transform:translateX(-50%);will-change:auto;z-index:1}.nplayer_danmaku_item-me{outline:2px solid;z-index:2}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\n    var isBrowser = typeof window !== 'undefined' && window.document\n    var el;\n\n    function insert() {\n      var style = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[3]!./index.scss\");\n      if (style.__esModule) style = style.default\n      var css = typeof style === 'string' ? style : style[0][1]\n      var create = false\n      if (!el) {\n        el = document.createElement('style')\n        el.setAttribute('type', 'text/css')\n        create = true\n      }\n\n      if ('textContent' in el) {\n        el.textContent = css\n      } else {\n        el.styleSheet.cssText = css\n      }\n\n      if (create) document.head.appendChild(el)\n    }\n\n    if (isBrowser) insert()\n\n    if (module.hot && isBrowser) {\n      module.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[3]!./index.scss\", function() {\n        insert()\n      });\n      module.hot.dispose(function() {\n        if (el) el.parentNode.removeChild(el)\n      });\n    }\n  ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { DanmakuOptions } from './danmaku';\n\nexport function isDefaultColor(color: string): boolean {\n  if (!color) return true;\n  color = color.toLowerCase();\n  return color === '#fff' || color === '#ffffff';\n}\n\nexport function createTimer() {\n  return {\n    _prevPauseTime: 0,\n    _pausedTime: 0,\n    _paused: false,\n\n    now() {\n      return ((this._paused ? this._prevPauseTime : Date.now()) - this._pausedTime) / 1000;\n    },\n\n    play() {\n      if (!this._paused) return;\n      this._pausedTime += (Date.now() - this._prevPauseTime);\n      this._paused = false;\n    },\n\n    pause() {\n      if (this._paused) return;\n      this._prevPauseTime = Date.now();\n      this._paused = true;\n    },\n  };\n}\n\nconst storageKey = 'nplayer:danmaku';\nexport function getStorageOptions(): DanmakuOptions | undefined {\n  try {\n    const optStr = window.localStorage.getItem(storageKey);\n    if (!optStr) return;\n    return JSON.parse(optStr);\n  } catch (error) {\n    // ignore\n  }\n}\nexport function setStorageOptions(opts: DanmakuOptions) {\n  try {\n    window.localStorage.setItem(storageKey, JSON.stringify(opts));\n  } catch (error) {\n    // ignore\n  }\n}\n\nexport const SEND_SETTINGS = 'Send settings';\nexport const SEND = 'Send';\nexport const MODE = 'Mode';\nexport const SCROLL = 'Scroll';\nexport const TOP = 'Top';\nexport const BOTTOM = 'Bottom';\nexport const COLOR = 'Color';\nexport const COLOUR = 'Color';\nexport const DANMAKU_SETTINGS = 'Danmaku settings';\nexport const ONOFF = 'On/Off';\nexport const RESTORE = 'Restore settings';\nexport const BLOCK_BT = 'Block by type';\nexport const OPACITY = 'Opacity &nbsp;';\nexport const DISPLAY_A = 'Area &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';\nexport const HALF_S = 'Half';\nexport const FULL_S = 'Full';\nexport const DANMAKU_S = 'Speed &nbsp;&nbsp;&nbsp;';\nexport const SLOW = 'Slow';\nexport const FAST = 'Fast';\nexport const FONTSIZE = 'Font size';\nexport const SMALL = 'Small';\nexport const BIG = 'Big';\nexport const UNLIMITED = 'Unlimited';\nexport const BOTTOM_TT = 'Bottom to top';\n\nexport const trans = {\n  [SEND_SETTINGS]: '发送设置',\n  [SEND]: '发送',\n  [MODE]: '模式',\n  [SCROLL]: '滚动',\n  [TOP]: '顶部',\n  [BOTTOM]: '底部',\n  [COLOR]: '颜色',\n  [COLOUR]: '彩色',\n  [DANMAKU_SETTINGS]: '弹幕设置',\n  [ONOFF]: '开/关',\n  [RESTORE]: '恢复默认设置',\n  [BLOCK_BT]: '按类型屏蔽',\n  [OPACITY]: '不透明度',\n  [DISPLAY_A]: '显示区域',\n  [HALF_S]: '半屏',\n  [FULL_S]: '全屏',\n  [DANMAKU_S]: '弹幕速度',\n  [SLOW]: '慢',\n  [FAST]: '快',\n  [FONTSIZE]: '字体大小',\n  [SMALL]: '小',\n  [BIG]: '大',\n  [UNLIMITED]: '不限弹幕',\n  [BOTTOM_TT]: '从下到上',\n};\n\nexport const EVENT = {\n  DANMAKU_SEND: 'DanmakuSend',\n  DANMAKU_UPDATE_OPTIONS: 'DanmakuUpdateOptions',\n} as const;\n","import type { Danmaku } from '.';\n\nexport interface BulletOption {\n  color?: string;\n  text: string;\n  time: number;\n  type?: 'top' | 'bottom' | 'scroll';\n  isMe?: boolean;\n  force?: boolean;\n}\n\nexport interface BulletSetting {\n  track: number;\n  // eslint-disable-next-line no-use-before-define\n  prev?: Bullet;\n}\n\nconst itemClass = 'nplayer_danmaku_item';\n\nexport class Bullet {\n  readonly element: HTMLElement;\n\n  width = 0;\n\n  left = 0;\n\n  length = 0; // w + l\n\n  startAt = 0;\n\n  showAt = 0;\n\n  endAt = 0;\n\n  speed = 0;\n\n  track = 0;\n\n  type!: string;\n\n  ended = false;\n\n  color = '';\n\n  private centerTimer!: any;\n\n  constructor(container: HTMLElement, private danmaku: Danmaku, opts: BulletOption, setting: BulletSetting) {\n    this.element = container.appendChild(document.createElement('div'));\n    this.element.className = itemClass;\n    this.init(opts, setting);\n  }\n\n  init(opts: BulletOption, setting: BulletSetting): this {\n    this.element.textContent = opts.text;\n    this.type = opts.type || 'scroll';\n    this.track = setting.track;\n    if (opts.color) this.element.style.color = this.color = opts.color;\n    if (opts.isMe) this.element.classList.add('nplayer_danmaku_item-me');\n    const style = this.element.style;\n    style.fontSize = `${this.danmaku.fontsize}px`;\n\n    this.startAt = this.danmaku.timer.now();\n\n    if (this.type === 'scroll') {\n      this.element.addEventListener('transitionend', this.end);\n      this.width = this.element.getBoundingClientRect().width + 20;\n      const danmakuWidth = this.danmaku.width;\n      const prev = setting.prev;\n      this.left = danmakuWidth;\n      this.speed = this.danmaku.speedScale * (danmakuWidth + this.width) / this.danmaku.opts.duration;\n\n      if (prev && !prev.ended) {\n        const s = (prev.length - danmakuWidth) - (this.startAt - prev.startAt) * prev.speed;\n        if (s >= 0) {\n          this.speed = prev.speed;\n          this.left += s;\n        } else {\n          const maxSpeed = this.danmaku.width / (prev.endAt - this.startAt);\n          if (this.speed > maxSpeed) this.speed = maxSpeed;\n        }\n      }\n\n      this.length = this.left + this.width;\n      const t = this.length / this.speed;\n      this.showAt = this.startAt + (this.length - danmakuWidth) / this.speed;\n      this.endAt = this.startAt + t;\n\n      this.updateScrollY();\n      style.left = `${this.left}px`;\n      style.transition = `transform ${t}s linear`;\n      style.transform = `translate3d(-${this.length}px,0,0)`;\n    } else {\n      style[this.type as any] = this.pos();\n      this.element.classList.add('nplayer_danmaku_item-center');\n      const duration = this.danmaku.speedScale * this.danmaku.opts.duration;\n      this.endAt = this.startAt + duration;\n      this.centerTimer = setTimeout(this.end, duration * 1000);\n    }\n\n    this.ended = false;\n    this.show();\n\n    if (this.danmaku.paused) this.pause(this.startAt);\n\n    return this;\n  }\n\n  private pos(): string {\n    return `${this.track * this.danmaku.trackHeight + 2}px`;\n  }\n\n  updateScrollY(bottomUp = this.danmaku.opts.bottomUp) {\n    if (this.type !== 'scroll') return;\n    const style = this.element.style;\n    style.top = style.bottom = '';\n    style[bottomUp ? 'bottom' : 'top'] = this.pos();\n  }\n\n  end = () => {\n    this.element.removeEventListener('transitionend', this.end);\n    clearTimeout(this.centerTimer);\n    this.element.style.cssText = '';\n    this.color = '';\n    this.element.className = itemClass;\n    this.ended = true;\n    this.hide();\n    this.danmaku.recycleBullet(this);\n  }\n\n  show() {\n    this.element.style.visibility = 'visible';\n  }\n\n  hide() {\n    this.element.style.visibility = 'hidden';\n  }\n\n  pause(time: number): void {\n    if (this.type === 'scroll') {\n      const style = this.element.style;\n      style.transition = 'transform 0s linear';\n      style.transform = `translate3d(-${(time - this.startAt) * this.speed}px,0,0)`;\n    } else {\n      clearTimeout(this.centerTimer);\n    }\n  }\n\n  run(time: number): void {\n    if (this.type === 'scroll') {\n      const style = this.element.style;\n      style.transition = `transform ${this.endAt - time}s linear`;\n      style.transform = `translate3d(-${this.length}px,0,0)`;\n    } else {\n      this.centerTimer = setTimeout(this.end, (this.endAt - time) * 1000);\n    }\n  }\n}\n","import type { Disposable, Player } from 'nplayer';\nimport {\n  getStorageOptions, isDefaultColor, setStorageOptions, createTimer, EVENT,\n} from '../utils';\nimport { Bullet, BulletOption, BulletSetting } from './bullet';\n\nexport interface DanmakuOptions {\n  disable?: boolean;\n  blocked?: Array<'scroll' | 'top' | 'bottom' | 'color'>;\n  fontsize?: number;\n  fontsizeScale?: number;\n  opacity?: number;\n  speed?: number;\n  area?: 0.25 | 0.5 | 0.75 | 1;\n  unlimited?: boolean;\n  bottomUp?: boolean;\n  colors?: string[];\n  duration?: number;\n  items?: BulletOption[];\n  zIndex?: number;\n  persistOptions?: boolean;\n  isDefaultColor?: (color: string) => boolean;\n  discard?: (b: BulletOption) => boolean;\n}\n\nexport const defaultOptions = (): Required<DanmakuOptions> => ({\n  disable: false,\n  blocked: [],\n  fontsize: 24,\n  fontsizeScale: 1,\n  opacity: 1,\n  speed: 1,\n  area: 0.5,\n  unlimited: false,\n  bottomUp: false,\n  colors: ['#FE0302', '#FF7204', '#FFAA02', '#FFD302', '#FFFF00', '#A0EE00', '#00CD00', '#019899', '#4266BE', '#89D5FF', '#CC0273', '#222222', '#9B9B9B', '#FFFFFF'],\n  duration: 5,\n  items: [],\n  zIndex: 5,\n  persistOptions: false,\n  isDefaultColor,\n  discard() { return false; },\n});\n\nexport class Danmaku implements Disposable {\n  element: HTMLElement;\n\n  opts: Required<DanmakuOptions>;\n\n  enabled = false;\n\n  paused = false;\n\n  track = 0;\n\n  trackHeight = 0;\n\n  timer: ReturnType<typeof createTimer>;\n\n  private bulletPool: Bullet[] = [];\n\n  private aliveBullets: Set<Bullet> = new Set();\n\n  private scrollBullets: (Bullet | undefined)[] = [];\n\n  private topBullets: number[] = [];\n\n  private bottomBullets: number[] = [];\n\n  private items: BulletOption[] = [];\n\n  private pos = 0;\n\n  private prevPauseTime = 0;\n\n  constructor(private player: Player, private _opts?: DanmakuOptions) {\n    this.opts = { ...defaultOptions(), ...getStorageOptions(), ..._opts };\n\n    const { $, addDisposable } = player.Player._utils;\n    this.element = player.element.appendChild($('.danmaku_screen'));\n    this.element.style.zIndex = String(this.opts.zIndex);\n\n    this.items = this.opts.items;\n\n    this.timer = createTimer();\n\n    if (!this.opts.disable) this.enable();\n\n    addDisposable(this, player.on(player.EVENT.MOUNTED, () => {\n      this.updateTrack();\n    }));\n\n    addDisposable(player, this);\n  }\n\n  get width(): number {\n    return this.player.rect.width;\n  }\n\n  get currentTime(): number {\n    return this.player.currentTime;\n  }\n\n  get playbackRate(): number {\n    return this.player.playbackRate;\n  }\n\n  get fontsize(): number {\n    return this.opts.fontsize * this.opts.fontsizeScale;\n  }\n\n  get speedScale(): number {\n    return this.playbackRate * this.opts.speed;\n  }\n\n  private createBullet(item: BulletOption, setting: BulletSetting): Bullet {\n    let bullet = this.bulletPool.pop();\n    if (bullet) {\n      bullet.init(item, setting);\n    } else {\n      bullet = new Bullet(this.element, this, item, setting);\n    }\n    this.aliveBullets.add(bullet);\n    return bullet;\n  }\n\n  private getShortestTrack(): [number, Bullet | undefined] {\n    let shortest = this.scrollBullets[0];\n    if (!shortest || shortest.ended) return [0] as any;\n    for (let i = 1, item; i < this.track; ++i) {\n      item = this.scrollBullets[i];\n      if (!item || item.ended) return [i] as any;\n      if (shortest.showAt > item.showAt) shortest = item;\n    }\n    return [shortest.track, shortest];\n  }\n\n  private getEmptyTrack(time: number, list: number[]): number {\n    for (let i = 0; i < this.track; ++i) {\n      if (!list[i] || list[i] <= time) return i;\n    }\n    return -1;\n  }\n\n  private shouldDiscard(item: BulletOption): boolean {\n    if (this.opts.blocked.includes(item.type || 'scroll')) return true;\n    if (this.opts.discard(item)) return true;\n    if (!item.color || !this.opts.blocked.includes('color')) return false;\n    return !this.opts.isDefaultColor(item.color);\n  }\n\n  private fire = () => {\n    if (!this.enabled || !this.player.playing) return;\n    if (this.paused) this.resume();\n    const currentTime = this.currentTime;\n    const inc = this.opts.unlimited ? 0.5 : 1;\n    const min = currentTime - inc;\n    const max = currentTime + inc;\n    let item: BulletOption;\n    const time = this.timer.now();\n    for (let l = this.items.length; this.pos < l; this.pos++) {\n      item = this.items[this.pos];\n      if (item.time < min) continue;\n      if (item.time > max) break;\n      if (this.shouldDiscard(item)) continue;\n      if (!this.insert(item, time)) break;\n    }\n  }\n\n  private updateTrack(): void {\n    this.trackHeight = this.fontsize + 5;\n    this.track = Math.floor(this.player.rect.height * this.opts.area / this.trackHeight);\n  }\n\n  private onSeeked = () => {\n    this.clearScreen();\n    this.pos = 0;\n  }\n\n  private storeOptions() {\n    this.player.emit(EVENT.DANMAKU_UPDATE_OPTIONS, this.opts);\n    if (this.opts.persistOptions) {\n      const opts = this.opts;\n      setStorageOptions({\n        blocked: opts.blocked,\n        fontsizeScale: opts.fontsizeScale,\n        opacity: opts.opacity,\n        speed: opts.speed,\n        area: opts.area,\n        unlimited: opts.unlimited,\n        bottomUp: opts.bottomUp,\n      } as DanmakuOptions);\n    }\n  }\n\n  recycleBullet(bullet: Bullet): void {\n    this.bulletPool.push(bullet);\n    this.aliveBullets.delete(bullet);\n    if (bullet.type === 'scroll' && this.scrollBullets[bullet.track] === bullet) this.scrollBullets[bullet.track] = undefined;\n  }\n\n  private insert(item: BulletOption, time: number): boolean {\n    if (!item.type || item.type === 'scroll') {\n      const [track, bullet] = this.getShortestTrack();\n      const canDiscard = !item.force && bullet && bullet.showAt > (time + 2);\n      if (canDiscard && !this.opts.unlimited) return false;\n      this.scrollBullets[track] = this.createBullet(item, { track, prev: canDiscard ? undefined : bullet });\n      return true;\n    }\n\n    const list = item.type === 'top' ? this.topBullets : this.bottomBullets;\n    let track = this.getEmptyTrack(time, list);\n    track = track === -1 && item.force ? 0 : track;\n    if (track !== -1) {\n      list[track] = this.createBullet(item, { track }).endAt;\n      return true;\n    }\n    return false;\n  }\n\n  send(opts: BulletOption): void {\n    if (opts.time == null) opts.time = this.currentTime;\n    opts = { isMe: true, force: true, ...opts };\n    this.player.emit(EVENT.DANMAKU_SEND, opts);\n    const i = this.addItem(opts);\n    if (this.pos > i) {\n      this.insert(opts, this.timer.now());\n    }\n  }\n\n  pause = () => {\n    this.prevPauseTime = this.timer.now();\n    this.timer.pause();\n    this.aliveBullets.forEach((bullet) => bullet.pause(this.prevPauseTime));\n    this.paused = true;\n  }\n\n  resume = () => {\n    if (!this.player.playing || this.player.loading.isActive) {\n      return;\n    }\n\n    this.timer.play();\n    this.aliveBullets.forEach((bullet) => bullet.run(this.prevPauseTime));\n    this.paused = false;\n  }\n\n  getItems(): BulletOption[] {\n    return this.items;\n  }\n\n  addItem(opts: BulletOption): number {\n    if (opts.time == null) return -1;\n    let index = 0;\n    for (let i = 0, l = this.items.length; i < l; i++) {\n      if (this.items[i].time > opts.time) {\n        index = i;\n        break;\n      }\n    }\n\n    this.items.splice(index, 0, opts);\n    return index;\n  }\n\n  appendItems(items: BulletOption[]): void {\n    this.items = this.items.concat(items);\n  }\n\n  resetItems(items: BulletOption[]): void {\n    this.items = items;\n    this.pos = 0;\n  }\n\n  updateOpacity(opacity = this.opts.opacity): void {\n    this.element.style.opacity = String(opacity);\n    this.storeOptions();\n  }\n\n  updateFontsize(scale = this.opts.fontsizeScale): void {\n    this.opts.fontsizeScale = scale;\n    this.updateTrack();\n    this.storeOptions();\n  }\n\n  updateArea(area: Required<DanmakuOptions>['area']): void {\n    if (![0.25, 0.5, 0.75, 1].includes(area)) return;\n    this.opts.area = area;\n    this.updateTrack();\n    this.storeOptions();\n  }\n\n  updateUnlimited(unlimited: boolean): void {\n    this.opts.unlimited = unlimited;\n    this.storeOptions();\n  }\n\n  updateBottomUp(bottomUp: boolean): void {\n    this.opts.bottomUp = bottomUp;\n    this.aliveBullets.forEach((b) => b.updateScrollY(bottomUp));\n    this.storeOptions();\n  }\n\n  updateSpeed(v: number): void {\n    this.opts.speed = v;\n    this.storeOptions();\n  }\n\n  blockType(type: Required<DanmakuOptions>['blocked'][0]): void {\n    if (this.opts.blocked.includes(type)) return;\n    this.opts.blocked.push(type);\n    this.aliveBullets.forEach((b) => {\n      if (b.type === type || (type === 'color' && !this.opts.isDefaultColor(b.color))) {\n        b.hide();\n      }\n    });\n    this.storeOptions();\n  }\n\n  allowType(type: Parameters<Danmaku['blockType']>[0]): void {\n    this.opts.blocked = this.opts.blocked.filter((t) => t !== type);\n    this.aliveBullets.forEach((b) => {\n      if (b.type === type || (type === 'color' && !this.opts.isDefaultColor(b.color))) {\n        b.show();\n      }\n    });\n    this.storeOptions();\n  }\n\n  resetOptions(): void {\n    this.opts.blocked.forEach((t) => {\n      this.allowType(t);\n    });\n    this.opts = { ...defaultOptions(), ...this._opts };\n    this.opts.blocked = [];\n    this.updateOpacity();\n    this.updateFontsize();\n    this.updateBottomUp(this.opts.bottomUp);\n  }\n\n  clearScreen() {\n    Array.from(this.aliveBullets).forEach((b) => b.end());\n    this.topBullets = [];\n    this.bottomBullets = [];\n  }\n\n  enable(): void {\n    if (this.enabled) return;\n    this.enabled = true;\n    const EV = this.player.EVENT;\n    this.player.on(EV.TIME_UPDATE, this.fire);\n    this.player.on(EV.PAUSE, this.pause);\n    this.player.on(EV.ENDED, this.pause);\n    this.player.on(EV.PLAY, this.resume);\n    this.player.on(EV.SEEKED, this.onSeeked);\n    this.player.on(EV.LOADING_SHOW, this.pause);\n    this.player.on(EV.LOADING_HIDE, this.resume);\n  }\n\n  disable(): void {\n    this.enabled = false;\n    this.clearScreen();\n    const EV = this.player.EVENT;\n    this.player.off(EV.TIME_UPDATE, this.fire);\n    this.player.off(EV.PAUSE, this.pause);\n    this.player.off(EV.ENDED, this.pause);\n    this.player.off(EV.PLAY, this.resume);\n    this.player.off(EV.SEEKED, this.onSeeked);\n    this.player.off(EV.LOADING_SHOW, this.pause);\n    this.player.off(EV.LOADING_HIDE, this.resume);\n  }\n\n  dispose(): void {\n    if (!this.player) return;\n    this.disable();\n    this.player.Player._utils.removeNode(this.element);\n    this.player.Player._utils.dispose(this);\n    this.player = null!;\n    this.bulletPool = null!;\n    this.aliveBullets = null!;\n    this.scrollBullets = null!;\n    this.topBullets = null!;\n    this.bottomBullets = null!;\n    this.items = null!;\n    this.element = null!;\n    this.opts = null!;\n  }\n\n  EVENT!: typeof EVENT\n}\n\nDanmaku.prototype.EVENT = EVENT;\n","import type {\n  Checkbox,\n  ControlItem,\n  Player, Popover, Tooltip,\n} from 'nplayer';\nimport { BulletOption } from './danmaku/bullet';\nimport {\n  BOTTOM, COLOR, isDefaultColor, MODE, SCROLL, SEND, SEND_SETTINGS, TOP,\n} from './utils';\n\nlet utils: Player['Player']['_utils'];\n\nclass DanmakuSendBox implements ControlItem {\n  readonly id = 'danmaku-send';\n\n  element!: HTMLElement;\n\n  private player!: Player\n\n   tooltip!: Tooltip;\n\n  private popover!: Popover;\n\n  private inputElement!: HTMLInputElement;\n\n  private sendElement!: HTMLElement;\n\n  private colorInputElement!: HTMLInputElement;\n\n  private colorElement!: HTMLElement;\n\n  private typeCBs: Record<Required<BulletOption>['type'], Checkbox> = {} as any;\n\n  private currentType = 'scroll';\n\n  init(player: Player) {\n    this.player = player;\n    const { _utils, components, I18n } = player.Player;\n    utils = _utils;\n    const {\n      $, addDisposableListener, addDisposable, createSvg,\n    } = utils;\n\n    this.element = $('.danmaku_send');\n    const settingElement = this.element.appendChild($());\n    settingElement.appendChild(createSvg('icon', 'M9.62 14L12 7.67 14.37 14M11 5L5.5 19h2.25l1.12-3h6.25l1.13 3h2.25L13 5h-2z'));\n    this.tooltip = addDisposable(this, new components.Tooltip(settingElement, I18n.t(SEND_SETTINGS)));\n    this.popover = addDisposable(this, new components.Popover(settingElement, undefined, undefined, true));\n    this.inputElement = this.element.appendChild($('input'));\n    this.sendElement = this.element.appendChild($('.danmaku_send_btn', undefined, I18n.t(SEND)));\n\n    const row = () => $('.flex.align-center.danmaku_row');\n    const panelElement = this.popover.panelElement;\n    let rowElement = $('.danmaku_row');\n    panelElement.appendChild(rowElement);\n    rowElement.appendChild($(undefined, undefined, I18n.t(MODE)));\n    rowElement = rowElement.appendChild($('.flex.align-center'));\n    this.typeCBs.scroll = addDisposable(this, new components.Checkbox(rowElement, { html: I18n.t(SCROLL), checked: true, change: this.onTypeChange('scroll') }));\n    this.typeCBs.top = addDisposable(this, new components.Checkbox(rowElement, { html: I18n.t(TOP), change: this.onTypeChange('top') }));\n    this.typeCBs.bottom = addDisposable(this, new components.Checkbox(rowElement, { html: I18n.t(BOTTOM), change: this.onTypeChange('bottom') }));\n    rowElement = row();\n    rowElement = $('.danmaku_row');\n    panelElement.appendChild(rowElement);\n    rowElement.appendChild($(undefined, undefined, I18n.t(COLOR)));\n    rowElement = rowElement.appendChild($('.danmaku_color_row'));\n    this.colorInputElement = rowElement.appendChild($('input'));\n    addDisposableListener(this, this.colorInputElement, 'input', () => {\n      this.updateColor(this.colorInputElement.value);\n    });\n    this.colorElement = rowElement.appendChild($('.danmaku_color_preview'));\n    rowElement = $('.danmaku_colors');\n    addDisposableListener(this, rowElement, 'click', ({ target }: MouseEvent) => {\n      const el = target as HTMLElement;\n      if (el && el.dataset.value) {\n        this.updateColor(el.dataset.value);\n      }\n    });\n    let colorItem;\n    player.danmaku.opts.colors.forEach((c) => {\n      colorItem = $('.danmaku_color');\n      colorItem.style.background = c;\n      colorItem.dataset.value = c;\n      rowElement.appendChild(colorItem);\n    });\n    panelElement.appendChild(rowElement);\n\n    addDisposableListener(this, settingElement, 'click', this.show);\n    addDisposableListener(this, this.inputElement, 'keypress', (ev: KeyboardEvent) => {\n      if (ev.altKey || ev.ctrlKey || ev.metaKey || ev.shiftKey) return;\n      const code = ev.keyCode || ev.which;\n      if (code !== 13) return;\n      this.send();\n    });\n    addDisposableListener(this, this.inputElement, 'focus', () => player.control.require());\n    addDisposableListener(this, this.inputElement, 'blur', () => player.control.release());\n    addDisposableListener(this, this.sendElement, 'click', this.send);\n\n    this.updateColor('#FFFFFF');\n  }\n\n  private onTypeChange = (type: Required<BulletOption>['type']) => () => {\n    this.currentType = type;\n    this.typeCBs.scroll.update(false);\n    this.typeCBs.top.update(false);\n    this.typeCBs.bottom.update(false);\n    this.typeCBs[type].update(true);\n  }\n\n  updateColor(v: string) {\n    this.colorInputElement.value = v;\n    this.colorElement.style.background = v;\n    this.inputElement.style.color = v;\n  }\n\n  show = (ev?: MouseEvent) => {\n    if (ev && utils.getEventPath(ev).includes(this.popover.element)) return;\n    this.tooltip.hide();\n    this.popover.show();\n  }\n\n  send = () => {\n    const value = this.inputElement.value;\n    if (!value) return;\n    this.inputElement.value = '';\n    const bullet: BulletOption = {\n      text: value,\n      time: this.player.currentTime,\n      type: this.currentType as any,\n      color: isDefaultColor(value) ? undefined : this.colorInputElement.value,\n    };\n    this.player.danmaku.send(bullet);\n  }\n\n  dispose() {\n    if (!this.player) return;\n    utils.dispose(this);\n    utils.removeNode(this.element);\n    this.player = null!;\n    this.element = null!;\n  }\n}\n\nexport const danmakuSendBoxControlItem = () => new DanmakuSendBox();\n","import type {\n  Player, Popover, Tooltip, Checkbox, Slider, ControlItem,\n} from 'nplayer';\nimport {\n  BIG, BLOCK_BT, BOTTOM, BOTTOM_TT, COLOUR, DANMAKU_S, DANMAKU_SETTINGS, DISPLAY_A, FAST, FONTSIZE,\n  FULL_S, HALF_S, ONOFF, OPACITY, RESTORE, SCROLL, SLOW, SMALL, TOP, UNLIMITED,\n} from './utils';\n\nclass DanmakuSetting implements ControlItem {\n  readonly id = 'danmaku-setting';\n\n  private player!: Player\n\n  element!: HTMLElement;\n\n  tooltip!: Tooltip;\n\n  private popover!: Popover;\n\n  private scrollCB!: Checkbox;\n\n  private topCB!: Checkbox;\n\n  private bottomCB!: Checkbox;\n\n  private colorCB!: Checkbox;\n\n  private unlimitedCB!: Checkbox;\n\n  private bottomUpCB!: Checkbox;\n\n  private opacitySlider!: Slider;\n\n  private areaSlider!: Slider;\n\n  private speedSlider!: Slider;\n\n  private fontsizeSlider!: Slider;\n\n  init(player: Player) {\n    this.player = player;\n    const { _utils, components, I18n } = player.Player;\n    const {\n      $, clamp, addDisposableListener, addDisposable, createSvg,\n    } = _utils;\n\n    this.element = $();\n    this.element.appendChild(createSvg('icon', 'M9 21v2H7v-2h2m4 0v2h-2v-2h2m4 0v2h-2v-2h2M2 19V3h20v16m-11-7H9v2h2v-2m8 0h-6v2h6v-2M7 8H5v2h2V8m12 0H9v2h10V8z'));\n    this.tooltip = addDisposable(this, new components.Tooltip(this.element, I18n.t(DANMAKU_SETTINGS)));\n    this.popover = addDisposable(this, new components.Popover(this.element));\n\n    addDisposableListener(this, this.element, 'click', this.show);\n\n    const panelElement = this.popover.panelElement;\n    _utils.addClass(panelElement, 'danmaku_setting');\n\n    player.on('Mounted', () => {\n      const row = () => $('.flex.align-center.danmaku_row');\n\n      let rowElement = row();\n      rowElement.appendChild($('.danmaku_onoff_label', undefined, I18n.t(ONOFF)));\n      addDisposable(this, new components.Switch(rowElement, player.danmaku.enabled, (v) => player.danmaku[v ? 'enable' : 'disable']()));\n      const resetBtn = rowElement.appendChild($('.danmaku_reset', undefined, I18n.t(RESTORE)));\n      addDisposableListener(this, resetBtn, 'click', () => {\n        player.danmaku.resetOptions();\n        this.update();\n      });\n      panelElement.appendChild(rowElement);\n      rowElement = $('.danmaku_row');\n      panelElement.appendChild(rowElement);\n      rowElement.appendChild($(undefined, undefined, I18n.t(BLOCK_BT)));\n      rowElement = rowElement.appendChild($('.flex.align-center'));\n      this.scrollCB = addDisposable(this, new components.Checkbox(rowElement, {\n        html: I18n.t(SCROLL),\n        change(v) {\n          player.danmaku[v ? 'blockType' : 'allowType']('scroll');\n        },\n      }));\n      this.topCB = addDisposable(this, new components.Checkbox(rowElement, {\n        html: I18n.t(TOP),\n        change(v) {\n          player.danmaku[v ? 'blockType' : 'allowType']('top');\n        },\n      }));\n      this.bottomCB = addDisposable(this, new components.Checkbox(rowElement, {\n        html: I18n.t(BOTTOM),\n        change(v) {\n          player.danmaku[v ? 'blockType' : 'allowType']('bottom');\n        },\n      }));\n      this.colorCB = addDisposable(this, new components.Checkbox(rowElement, {\n        html: I18n.t(COLOUR),\n        change(v) {\n          player.danmaku[v ? 'blockType' : 'allowType']('color');\n        },\n      }));\n      rowElement = row();\n      rowElement.appendChild($(undefined, undefined, I18n.t(OPACITY)));\n      this.opacitySlider = addDisposable(this, new components.Slider(rowElement, {\n        stops: [{ value: 0, html: '10%' }, { value: 1, html: '100%' }],\n        change(value) {\n          player.danmaku.updateOpacity(clamp(value + 0.1, 0.1, 1));\n        },\n      }, player));\n      panelElement.appendChild(rowElement);\n      rowElement = row();\n      rowElement.appendChild($(undefined, undefined, I18n.t(DISPLAY_A)));\n      this.areaSlider = addDisposable(this, new components.Slider(rowElement, {\n        stops: [{ value: 0, html: '1/4' }, { value: 0.33, html: I18n.t(HALF_S) }, { value: 0.66, html: '3/4' }, { value: 1, html: I18n.t(FULL_S) }],\n        step: true,\n        change(v) {\n          v = v === 0 ? 0.25 : v === 0.33 ? 0.5 : v === 0.66 ? 0.75 : 1;\n          player.danmaku.updateArea(v as any);\n        },\n      }, player));\n      panelElement.appendChild(rowElement);\n      rowElement = row();\n      rowElement.appendChild($(undefined, undefined, I18n.t(DANMAKU_S)));\n      this.speedSlider = addDisposable(this, new components.Slider(rowElement, {\n        stops: [{ value: 0, html: I18n.t(SLOW) }, { value: 1, html: I18n.t(FAST) }],\n        change(v) {\n          player.danmaku.updateSpeed(clamp(v + 0.5, 0.5, 1.5));\n        },\n      }, player));\n      panelElement.appendChild(rowElement);\n      rowElement = row();\n      rowElement.appendChild($(undefined, undefined, I18n.t(FONTSIZE)));\n      this.fontsizeSlider = addDisposable(this, new components.Slider(rowElement, {\n        stops: [{ value: 0, html: I18n.t(SMALL) }, { value: 1, html: I18n.t(BIG) }],\n        change(v) {\n          player.danmaku.updateFontsize(clamp(v + 0.5, 0.5, 1.5));\n        },\n      }, player));\n      panelElement.appendChild(rowElement);\n      rowElement = row();\n      this.unlimitedCB = addDisposable(this, new components.Checkbox(rowElement, {\n        html: I18n.t(UNLIMITED), change(v) { player.danmaku.updateUnlimited(v); },\n      }));\n      this.bottomUpCB = addDisposable(this, new components.Checkbox(rowElement, {\n        html: I18n.t(BOTTOM_TT), change(v) { player.danmaku.updateBottomUp(v); },\n      }));\n      panelElement.appendChild(rowElement);\n\n      this.update();\n    });\n  }\n\n  update() {\n    const opts = this.player.danmaku.opts;\n    this.scrollCB.update(opts.blocked.includes('scroll'));\n    this.topCB.update(opts.blocked.includes('top'));\n    this.bottomCB.update(opts.blocked.includes('bottom'));\n    this.colorCB.update(opts.blocked.includes('color'));\n    this.unlimitedCB.update(opts.unlimited);\n    this.bottomUpCB.update(opts.bottomUp);\n    this.opacitySlider.update(opts.opacity);\n    this.areaSlider.update({\n      0.25: 0, 0.5: 0.33, 0.75: 0.66, 1: 1,\n    }[opts.area]);\n    this.speedSlider.update(opts.speed - 0.5);\n    this.fontsizeSlider.update(opts.fontsizeScale - 0.5);\n  }\n\n  show = () => {\n    this.popover.show();\n    this.tooltip.hide();\n  }\n\n  dispose() {\n    if (!this.player) return;\n    this.player.Player._utils.dispose(this);\n    this.player.Player._utils.removeNode(this.element);\n    this.player = null!;\n  }\n}\n\nexport const danmakuSettingControlItem = () => new DanmakuSetting();\n","import type { Plugin as P, Player } from 'nplayer';\nimport { Danmaku, DanmakuOptions } from './danmaku';\nimport { danmakuSendBoxControlItem } from './send-box';\nimport { danmakuSettingControlItem } from './setting';\nimport { trans } from './utils';\n\nexport interface DanmakuPluginOption extends DanmakuOptions {\n  autoInsertControl: boolean;\n}\n\nexport class Plugin implements P {\n  private opts: DanmakuPluginOption;\n\n  constructor(opts: DanmakuPluginOption) {\n    this.opts = opts;\n  }\n\n  apply(player: Player) {\n    player.registerControlItem(danmakuSendBoxControlItem());\n    player.registerControlItem(danmakuSettingControlItem());\n\n    player.Player.I18n.add('zh-cn', trans);\n    player.danmaku = new Danmaku(player, this.opts);\n\n    if (this.opts && this.opts.autoInsertControl !== false) {\n      const i = player.opts.controls.findIndex((c) => c === 'spacer');\n      if (i > -1) {\n        player.opts.controls.splice(i + 1, 0, 'danmaku-send', 'danmaku-setting');\n        const spacer = player.getControlItem('spacer');\n        if (spacer) spacer.flex(0);\n      } else {\n        player.opts.controls.push('danmaku-send', 'danmaku-setting');\n      }\n    }\n  }\n\n  static Plugin = Plugin;\n}\n"],"sourceRoot":""}